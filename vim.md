# Vim常用指令整理

>Important: 所有的編輯指令，都必須在英文輸入法下才能作用。另外， vim 指令區分大小寫。

>Note: 建議安裝英文輸入法 (`<win>` + `<space>`切換輸入法)，並將`<caps lock>`鍵改成`<ctrl>` (window提供power toys軟體供改鍵)。

>更多改鍵想法可參考 HHKB 鍵盤配置。

<br>

此文章遵循以下規則:

1. 列為 row，行為 col

```
   行1 行2 行3
列1
列2
列3
```

2. 中括號`[]`內的內容為動作或變數。

<br>

新手想入門 vim，可以跳至文章最後 [**補充:快速入門**](#補充-快速入門)。

<br>

## **1.編輯模式 (insert-mode)(線光標)**

<br/>

### *切換*
指令|用途
---|---
`<ctrl> [`|切換 normal
`<esc>`|切換 normal

<br/>

## **2.普通模式 (normal-mode)(格光標)**

<br/>

### *切換*
指令|用途
---|---
v|切換 visual，單格選取
V|切換 visual，單列選取
`<ctrl>` v|切換 visual，自由選取
i|切換 insert，光標移動到字元前
a|切換 insert，光標移動到字元後
I|切換 insert，光標移動到列首
A|切換 insert，光標移動到列尾
cw|切換 insert，刪除光標所在單字(類似 d，但 d 不切換 insert)
o|切換 insert，下一列新增一列
:|切換 command，後續可加指令
/[word]|切換 command，向下搜尋 word
?[word]|切換 command，向上搜尋 word

<br/>

### *光標移動* (num 加指令表示做 num 次指令)
指令|用途
---|---
h|光標左移
j|光標下移
k|光標上移
l|光標右移
w|光標移至下個單字的頭
e|光標移至下個單字的尾
f[c]|光標移至當列c的位置
0|光標移至當列頭
$|光標移至當列尾
H|光標移至畫面頂
M|光標移至畫面中
L|光標移至畫面底
gg|光標移至檔案首列
G|光標移至檔案尾列
m[c]|以 c 標記光標所在列
'[c]|光標移至 c 所標記的列


<br/>

### *畫面移動*
指令|用途
---|---
`<ctrl>` e|畫面向下移動一格
`<ctrl>` y|畫面向上移動一格
`<ctrl>` d|畫面向下移動半頁
`<ctrl>` u|畫面向上移動半頁
`<ctrl>` f|畫面向下移動一頁
`<ctrl>` b|畫面向下移動一頁


<br/>

### *編輯* (num 加指令表示做 num 次指令)

指令|用途
---|---
r|替換光標字元
x|刪除光標文字
dd|刪除當列
dw|刪除一個單字 (delete word)
di{|刪除 {} 內的內容 (delete inside { })
da{|刪除 {} 內的內容，包含 {} 符號 (delete all { })
yy|複製當列
yw|複製光標所在單字
p|貼上
10p|貼上 10 次
"+p|vim 環境外複製的文字，可用此指令貼上
J|當列與下一列合併
u|回上一步
`<ctrl>` r|回下一步
.|回下一步(同`<ctrl>` r)
`>>`|縮排(同 tab)
`<<`|取消縮排(往前一個 tab)

<br/>


## **3.命令模式 (command-mode)(底線光標)**

<br/>

指令|用途
---|---
/[word]|向光標下方搜尋 word (加 n 繼續往下搜尋)
?[word]|向光標上方搜尋 word
:w|儲存
:q|關閉
:num|跳到第 num 列
:s/[word1]/[word2]/gc|當列 word1 替換成 word2
:%s/[word1]/[word2]/gc|全部 word1 替換成 word2，參數 g (global) 整列全部換(非只換一列第一個)，c (comfirm) 取代前確認。參數可不加
:[num1],[num2]`s`/[word1]/[word2]/gc|num1 到 num2 列的 word1 替換成 word2，參數說明同上
:reg|查看暫存器內容
:za|摺疊/展開

<br>

### *多檔編輯*

指令|用途
---|---
:e [file]|開起 file (tab 可補全)，不存在則新增
:e [path]/[file]|開啟 path 下的 file
:vsp [file]|開啟 file 到視窗右側
:`<ctrl>` w|光標於兩視窗間切換
:bn|切換到下一個檔案
:bp|切換到上一個檔案
:wall|儲存全部檔案
:qall|關閉全部檔案

<br/>

## **4.可視模式 (visual-mode)(不閃爍格光標)**

<br/>

等同 window 的 shift 選取

指令|用途
---|---
選取後按`I`|在多行開頭插入輸入文字
選取後按`A`|在多行結尾插入輸入文字
選取後按`U`|選取範圍的字元轉大寫
選取後按`u`|選取範圍的字元轉小寫

<br>

---

### *補充*: 指令英文全名
指令|全名
---|---
i|insert
a|append (or add)
c|change
d|delete
s|substitute
y|yank
p|paste
sp|split
w|write
q|quit

<br>

---

### *補充*: 暫存器 (register)
vim中，暫存器名稱開頭會加上`"`，使用時會配合 y 與 p

常用暫存器分為以下幾種:

"+

**系統暫存器**，作業系統下複製內容會被放入此 reg

""

**無名暫存器**，d,c,x,y 內容皆會放入此 reg

"0

**複製專用暫存器**，y複製的內容會放入此reg

"1 ~ "9

**刪除專用暫存器**，d 刪除的內容會被放入種 reg。最新刪除內容會被放到 "1，原內容則延到 "2，依此類推。

"a ~ "z

**有名暫存器**，此 reg 的內容只能被使用者特別指定並放入

<br>

---

### *補充*: 快速入門
h|j|k|l
---|---|---|---
左|下|上|右

<br>

`＜esc>`|i|a
---|---|---
切換 normal 模式|在光標前編輯|在光標後編輯

<br>

w|b|o|:[num]
---|---|---|---
跳下一個單字|跳上一個單字|新增一列|跳到 num 列

<br>

u|`<ctrl>` r
---|---
回上一步|回下一步

>Note: vim 區分大小寫，有時指令出錯是因為按到大寫，或在中文模式。
